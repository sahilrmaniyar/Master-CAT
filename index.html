<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAT Calculation Master</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            min-width: 120px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .main-content {
            padding: 30px;
        }

        .topic-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .topic-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: center;
            border: none;
            font-size: 1rem;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(79, 172, 254, 0.4);
        }

        .topic-card.active {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            transform: scale(1.05);
        }

        .question-area {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        .question-text {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-section {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .answer-input {
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            width: 200px;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .submit-btn, .next-btn, .start-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn:hover, .next-btn:hover, .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .correct {
            background: linear-gradient(135deg, #56ab2f, #a8e6cf);
            color: white;
        }

        .incorrect {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ff6b6b;
            text-align: center;
            margin-bottom: 20px;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .difficulty-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .welcome-screen {
            text-align: center;
            padding: 50px 20px;
        }

        .welcome-screen h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 20px;
        }

        .welcome-screen p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .final-score {
            text-align: center;
            padding: 40px;
        }

        .final-score h2 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 20px;
        }

        .performance-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .analysis-card {
            background: linear-gradient(135deg, #84fab0, #8fd3f4);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .question-area {
            animation: slideIn 0.5s ease;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .stats-bar { flex-direction: column; gap: 10px; }
            .answer-section { flex-direction: column; align-items: stretch; }
            .answer-input { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ CAT Calculation Master</h1>
            <p>Master quantitative calculations for CAT success</p>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="totalQuestions">0</div>
                <div class="stat-label">Questions</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="correctAnswers">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="timeSpent">0:00</div>
                <div class="stat-label">Time</div>
            </div>
        </div>

        <div class="main-content">
            <div id="welcomeScreen" class="welcome-screen">
                <h2>Welcome to CAT Calculation Practice!</h2>
                <p>Choose your topic and difficulty level to start practicing. This app covers all major calculation areas tested in CAT quantitative sections.</p>
                
                <div class="topic-selector">
                    <button class="topic-card" data-topic="percentage">üìä Percentage</button>
                    <button class="topic-card" data-topic="ratio">‚öñÔ∏è Ratio & Proportion</button>
                    <button class="topic-card" data-topic="interest">üí∞ Simple & Compound Interest</button>
                    <button class="topic-card" data-topic="profit">üíº Profit & Loss</button>
                    <button class="topic-card" data-topic="time">‚è±Ô∏è Time & Work</button>
                    <button class="topic-card" data-topic="speed">üöÄ Speed & Distance</button>
                </div>

                <div class="difficulty-selector">
                    <button class="difficulty-btn active" data-difficulty="easy">Easy</button>
                    <button class="difficulty-btn" data-difficulty="medium">Medium</button>
                    <button class="difficulty-btn" data-difficulty="hard">Hard</button>
                </div>

                <button class="start-btn" onclick="startPractice()">Start Practice Session</button>
            </div>

            <div id="practiceScreen" style="display: none;">
                <div class="timer" id="timer">Time: 0:00</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>

                <div class="question-area">
                    <div class="question-text" id="questionText"></div>
                    <div class="answer-section">
                        <input type="number" class="answer-input" id="answerInput" placeholder="Enter your answer" step="any">
                        <button class="submit-btn" onclick="submitAnswer()">Submit</button>
                        <button class="next-btn" onclick="nextQuestion()" style="display: none;">Next Question</button>
                    </div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                </div>
            </div>

            <div id="finalScreen" style="display: none;" class="final-score">
                <h2>üéâ Practice Complete!</h2>
                <div class="performance-analysis">
                    <div class="analysis-card">
                        <h3 id="finalScore">0/0</h3>
                        <p>Questions Correct</p>
                    </div>
                    <div class="analysis-card">
                        <h3 id="finalAccuracy">0%</h3>
                        <p>Accuracy</p>
                    </div>
                    <div class="analysis-card">
                        <h3 id="finalTime">0:00</h3>
                        <p>Total Time</p>
                    </div>
                    <div class="analysis-card">
                        <h3 id="avgTime">0s</h3>
                        <p>Avg per Question</p>
                    </div>
                </div>
                <button class="start-btn" onclick="restartPractice()">Practice Again</button>
            </div>
        </div>
    </div>

    <script>
        let currentTopic = '';
        let currentDifficulty = 'easy';
        let questions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let startTime = 0;
        let questionStartTime = 0;
        let timerInterval;

        const questionTemplates = {
            percentage: {
                easy: [
                    () => {
                        const base = Math.floor(Math.random() * 100) + 50;
                        const percent = [10, 20, 25, 50].find(() => Math.random() < 0.25) || 20;
                        return {
                            question: `What is ${percent}% of ${base}?`,
                            answer: (base * percent) / 100
                        };
                    },
                    () => {
                        const part = Math.floor(Math.random() * 50) + 10;
                        const whole = part * (Math.floor(Math.random() * 4) + 2);
                        return {
                            question: `${part} is what percentage of ${whole}?`,
                            answer: (part / whole) * 100
                        };
                    }
                ],
                medium: [
                    () => {
                        const original = Math.floor(Math.random() * 500) + 200;
                        const increase = Math.floor(Math.random() * 30) + 10;
                        const newValue = original * (1 + increase/100);
                        return {
                            question: `A value increases from ${original} to ${newValue.toFixed(0)}. What is the percentage increase?`,
                            answer: increase
                        };
                    }
                ],
                hard: [
                    () => {
                        const x = Math.floor(Math.random() * 20) + 10;
                        const y = Math.floor(Math.random() * 20) + 10;
                        return {
                            question: `If A is ${x}% more than B, and B is ${y}% less than C, and C = 100, find A.`,
                            answer: (100 * (100 - y) / 100) * (100 + x) / 100
                        };
                    }
                ]
            },
            ratio: {
                easy: [
                    () => {
                        const a = Math.floor(Math.random() * 5) + 2;
                        const b = Math.floor(Math.random() * 5) + 2;
                        const total = (Math.floor(Math.random() * 10) + 5) * (a + b);
                        return {
                            question: `Two numbers are in the ratio ${a}:${b}. If their sum is ${total}, find the larger number.`,
                            answer: (total * Math.max(a, b)) / (a + b)
                        };
                    }
                ],
                medium: [
                    () => {
                        const a = Math.floor(Math.random() * 4) + 2;
                        const b = Math.floor(Math.random() * 4) + 2;
                        const c = Math.floor(Math.random() * 4) + 2;
                        const total = (Math.floor(Math.random() * 10) + 10) * (a + b + c);
                        return {
                            question: `Three numbers are in ratio ${a}:${b}:${c}. If their sum is ${total}, find the middle number.`,
                            answer: (total * b) / (a + b + c)
                        };
                    }
                ],
                hard: [
                    () => {
                        const ratio1 = Math.floor(Math.random() * 3) + 2;
                        const ratio2 = Math.floor(Math.random() * 3) + 2;
                        const change = Math.floor(Math.random() * 10) + 5;
                        return {
                            question: `Two numbers are in ratio ${ratio1}:${ratio2}. If ${change} is added to each, the ratio becomes ${ratio1+1}:${ratio2+1}. Find the smaller number.`,
                            answer: change * Math.min(ratio1, ratio2)
                        };
                    }
                ]
            },
            interest: {
                easy: [
                    () => {
                        const principal = Math.floor(Math.random() * 5000) + 1000;
                        const rate = [5, 10, 12, 15].find(() => Math.random() < 0.25) || 10;
                        const time = Math.floor(Math.random() * 5) + 1;
                        return {
                            question: `Find Simple Interest on ‚Çπ${principal} at ${rate}% per annum for ${time} years.`,
                            answer: (principal * rate * time) / 100
                        };
                    }
                ],
                medium: [
                    () => {
                        const principal = Math.floor(Math.random() * 10000) + 5000;
                        const rate = Math.floor(Math.random() * 10) + 8;
                        const time = 2;
                        const ci = principal * Math.pow(1 + rate/100, time) - principal;
                        return {
                            question: `Find Compound Interest on ‚Çπ${principal} at ${rate}% per annum for ${time} years.`,
                            answer: Math.round(ci)
                        };
                    }
                ],
                hard: [
                    () => {
                        const principal = 10000;
                        const rate = 12;
                        const time = 1.5;
                        const amount = principal * Math.pow(1 + rate/100, Math.floor(time)) * (1 + (time - Math.floor(time)) * rate/100);
                        return {
                            question: `Find amount on ‚Çπ${principal} at ${rate}% per annum compounded annually for 1.5 years.`,
                            answer: Math.round(amount)
                        };
                    }
                ]
            },
            profit: {
                easy: [
                    () => {
                        const cp = Math.floor(Math.random() * 1000) + 500;
                        const profit = Math.floor(Math.random() * 200) + 50;
                        return {
                            question: `Cost Price = ‚Çπ${cp}, Profit = ‚Çπ${profit}. Find Selling Price.`,
                            answer: cp + profit
                        };
                    }
                ],
                medium: [
                    () => {
                        const cp = Math.floor(Math.random() * 2000) + 1000;
                        const profitPercent = Math.floor(Math.random() * 30) + 10;
                        return {
                            question: `An article is sold at ${profitPercent}% profit. If cost price is ‚Çπ${cp}, find selling price.`,
                            answer: cp * (1 + profitPercent/100)
                        };
                    }
                ],
                hard: [
                    () => {
                        const sp = Math.floor(Math.random() * 2000) + 1500;
                        const loss = Math.floor(Math.random() * 15) + 5;
                        const cp = sp / (1 - loss/100);
                        return {
                            question: `An article is sold for ‚Çπ${sp} at ${loss}% loss. Find the cost price.`,
                            answer: Math.round(cp)
                        };
                    }
                ]
            },
            time: {
                easy: [
                    () => {
                        const days = Math.floor(Math.random() * 20) + 10;
                        const workers = Math.floor(Math.random() * 10) + 5;
                        return {
                            question: `${workers} workers can complete a job in ${days} days. How many days will 1 worker take?`,
                            answer: days * workers
                        };
                    }
                ],
                medium: [
                    () => {
                        const aWork = Math.floor(Math.random() * 15) + 10;
                        const bWork = Math.floor(Math.random() * 15) + 10;
                        const combined = 1/(1/aWork + 1/bWork);
                        return {
                            question: `A can do work in ${aWork} days, B in ${bWork} days. Together they can finish in how many days?`,
                            answer: Math.round(combined * 100) / 100
                        };
                    }
                ],
                hard: [
                    () => {
                        const total = 60;
                        const aRate = 1/20;
                        const bRate = 1/30;
                        const daysA = 10;
                        const remaining = 1 - (daysA * aRate);
                        const daysB = remaining / bRate;
                        return {
                            question: `A can complete work in 20 days, B in 30 days. A works for 10 days then leaves. B completes remaining work in how many days?`,
                            answer: daysB
                        };
                    }
                ]
            },
            speed: {
                easy: [
                    () => {
                        const speed = Math.floor(Math.random() * 40) + 40;
                        const time = Math.floor(Math.random() * 5) + 2;
                        return {
                            question: `A car travels at ${speed} km/h for ${time} hours. What distance is covered?`,
                            answer: speed * time
                        };
                    }
                ],
                medium: [
                    () => {
                        const distance = Math.floor(Math.random() * 200) + 100;
                        const speed1 = Math.floor(Math.random() * 20) + 40;
                        const speed2 = Math.floor(Math.random() * 20) + 40;
                        const avgSpeed = (2 * speed1 * speed2) / (speed1 + speed2);
                        return {
                            question: `A person goes ${distance}km at ${speed1} km/h and returns at ${speed2} km/h. Find average speed.`,
                            answer: Math.round(avgSpeed * 100) / 100
                        };
                    }
                ],
                hard: [
                    () => {
                        const speed1 = 60;
                        const speed2 = 40;
                        const distance = 120;
                        const meetTime = distance / (speed1 + speed2);
                        const meetDistance = speed1 * meetTime;
                        return {
                            question: `Two trains 120 km apart approach each other at 60 km/h and 40 km/h. At what distance from first train do they meet?`,
                            answer: meetDistance
                        };
                    }
                ]
            }
        };

        function generateQuestion(topic, difficulty) {
            const templates = questionTemplates[topic][difficulty];
            const template = templates[Math.floor(Math.random() * templates.length)];
            return template();
        }

        function startPractice() {
            const selectedTopic = document.querySelector('.topic-card.active');
            const selectedDifficulty = document.querySelector('.difficulty-btn.active');
            
            if (!selectedTopic) {
                alert('Please select a topic first!');
                return;
            }

            currentTopic = selectedTopic.dataset.topic;
            currentDifficulty = selectedDifficulty.dataset.difficulty;
            
            // Generate questions
            questions = [];
            for (let i = 0; i < 10; i++) {
                questions.push(generateQuestion(currentTopic, currentDifficulty));
            }
            
            currentQuestionIndex = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            startTime = Date.now();
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('practiceScreen').style.display = 'block';
            
            startTimer();
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endPractice();
                return;
            }

            const question = questions[currentQuestionIndex];
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('answerInput').value = '';
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('answerInput').focus();
            
            document.querySelector('.submit-btn').style.display = 'inline-block';
            document.querySelector('.next-btn').style.display = 'none';
            
            questionStartTime = Date.now();
            updateProgress();
        }

        function submitAnswer() {
            const userAnswer = parseFloat(document.getElementById('answerInput').value);
            const correctAnswer = questions[currentQuestionIndex].answer;
            const feedback = document.getElementById('feedback');
            
            totalQuestions++;
            
            const tolerance = Math.abs(correctAnswer) * 0.02; // 2% tolerance
            const isCorrect = Math.abs(userAnswer - correctAnswer) <= Math.max(tolerance, 0.01);
            
            if (isCorrect) {
                correctAnswers++;
                feedback.textContent = `Correct! The answer is ${correctAnswer.toFixed(2)}`;
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = `Incorrect. The correct answer is ${correctAnswer.toFixed(2)}`;
                feedback.className = 'feedback incorrect';
            }
            
            feedback.style.display = 'block';
            document.querySelector('.submit-btn').style.display = 'none';
            document.querySelector('.next-btn').style.display = 'inline-block';
            
            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        function updateStats() {
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('correctAnswers').textContent = correctAnswers;
            document.getElementById('accuracy').textContent = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) + '%' : '0%';
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const minutes = Math.floor(elapsed / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                document.getElementById('timer').textContent = `Time: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('timeSpent').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function endPractice() {
            clearInterval(timerInterval);
            
            const totalTime = Date.now() - startTime;
            const minutes = Math.floor(totalTime / 60000);
            const seconds = Math.floor((totalTime % 60000) / 1000);
            const avgSeconds = Math.round(totalTime / 1000 / totalQuestions);
            
            document.getElementById('practiceScreen').style.display = 'none';
            document.getElementById('finalScreen').style.display = 'block';
            
            document.getElementById('finalScore').textContent = `${correctAnswers}/${totalQuestions}`;
            document.getElementById('finalAccuracy').textContent = Math.round((correctAnswers / totalQuestions) * 100) + '%';
            document.getElementById('finalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('avgTime').textContent = avgSeconds + 's';
        }

        function restartPractice() {
            document.getElementById('finalScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            
            // Reset stats
            correctAnswers = 0;
            totalQuestions = 0;
            updateStats();
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Topic selection
            document.querySelectorAll('.topic-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.topic-card').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Difficulty selection
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Enter key for answer submission
            document.getElementById('answerInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    if (document.querySelector('.submit-btn').style.display !== 'none') {
                        submitAnswer();
                    } else {
                        nextQuestion();
                    }
                }
            });
        });
    </script>
</body>
</html>
